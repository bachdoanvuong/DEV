"use strict";(self.webpackChunkdev_community=self.webpackChunkdev_community||[]).push([[891],{83039:function(e,t,n){n.d(t,{Z:function(){return b}});var i=n(70885),r=n(72791),o=n(21288),c=n(59434),u=n(28735),s=n(69829),a=n(86853),m=n(48250),d=n(95798),l=n(39126),f=n(80184),p=function(e){var t=e.onChange;return(0,f.jsxs)(u.xu,{onClick:function(){document.querySelector(".toolbar_img_command").click()},justify:"center",m:"0",cursor:"pointer",w:"35px",h:"30px",pos:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:[(0,f.jsx)(d.II,{className:"toolbar_img_command",opacity:0,visibility:"hidden",w:"0",h:"0",type:"file",accept:"image/jpeg, image/png, image/jpg , image/webp, image/gif",onChange:t}),(0,f.jsx)(l.Lwf,{size:20,style:{position:"absolute",cursor:"pointer",zIndex:"1"}})]})},x=n(95763),g=(n(13440),n(49296),function(){var e=(0,o.getDefaultToolbarCommands)();return e[1].splice(3,1,"code-block","img_url"),e}),v={name:"code-block",icon:function(){return(0,f.jsx)(l.FJ$,{size:18,style:{position:"absolute"}})},execute:function(e){e.textApi.replaceSelection("```\n Enter code here... \n```")}},h=function(e){var t=e.MDEValue,n=e.setMDEValue,d=e.isSubmitting,l=e.setUploadingImg,h=(0,r.useState)(t||""),b=(0,i.Z)(h,2),w=b[0],Z=b[1],j=(0,r.useState)("write"),I=(0,i.Z)(j,2),y=I[0],S=I[1],k=(0,c.I0)();(0,r.useEffect)((function(){n?n(w):k((0,x.U$)(w))}),[w,k,n]),(0,r.useEffect)((function(){t||Z(t)}),[t]),(0,r.useEffect)((function(){document.querySelector(".mde-text").disabled=!!d}),[d]);var E=function(e){var t=e.target.files[0];if(t){document.querySelector(".mde-text").disabled=!0,l(!0),Z((function(e){return e.replace("![](img_url)","![](uploading...)")}));var n="images/".concat(C.name).concat((0,s.x0)());(0,a.Ix)(t,n).then((function(e){document.querySelector(".mde-text").disabled=!1,Z((function(t){return t.replace("![](uploading...)","![](".concat(e,")"))})),l(!1)})).catch((function(e){return console.log(e)})),e.target.value=""}},C={name:"image_url",icon:function(){return(0,f.jsx)(p,{onChange:E})},execute:function(e){e.textApi.replaceSelection("![](img_url)")}};return(0,f.jsx)(u.xu,{w:"100%",fontFamily:"monospace",children:(0,f.jsx)(o.default,{commands:{"code-block":v,img_url:C},loadingPreview:"loading...",toolbarCommands:g(),value:w,onChange:Z,selectedTab:y,onTabChange:S,generateMarkdownPreview:function(e){return Promise.resolve((0,m.Z)().makeHtml(e))}})})},b=r.memo(h)},65294:function(e,t,n){var i=n(4942),r=n(1413),o=n(42982),c=n(70885),u=n(72791),s=n(28227),a=n(28735),m=n(92213),d=n(48250),l=n(64097),f=n(83039),p=(n(49296),n(89856)),x=n(86853),g=n(59434),v=n(12481),h=n(58241),b=n(69829),w=n(24507),Z=n(56944),j=n(56920),I=n(80184);t.Z=function(e){var t,n=e.postId,y=e.commentId,S=e.showDismiss,k=e.onDismiss,E=e.valueToEdit,C=e.transformedComments,D=e.repliedUserId,_=(0,h.a)(),A=(0,g.I0)(),T=(0,g.v9)((function(e){return e.transformedData})).transformedData,q=(0,u.useState)(!1),U=(0,c.Z)(q,2),z=U[0],L=U[1],M=(0,u.useState)(!1),N=(0,c.Z)(M,2),F=N[0],P=N[1],R=(0,u.useState)("write"),V=(0,c.Z)(R,2),B=V[0],H=V[1],K=(0,u.useState)(E||""),O=(0,c.Z)(K,2),$=O[0],W=O[1],J=null===T||void 0===T||null===(t=T.find((function(e){return e.id===n})))||void 0===t?void 0:t.comments,X=$.trim();(0,u.useEffect)((function(){var e=document.querySelector(".mde-text");_||(document.querySelector(".mde-header").style.display="none",e.readOnly=!0);var t=function(){_||A((0,Z._)(!0))};return null===e||void 0===e||e.addEventListener("click",t),function(){return null===e||void 0===e?void 0:e.removeEventListener("click",t)}}),[_,A]),(0,u.useEffect)((function(){(0,o.Z)(document.querySelectorAll(".mde-text")).map((function(e,t){return e.placeholder=0===t?"Add to the discussion...":"Reply..."}))}),[B]),(0,u.useEffect)((function(){"preview"===B&&j.Z.highlightAll()}),[B]);var G=(0,s.ff)("0 0 0 1px rgb(212 212 212)","0 0 0 1px rgb(255 255 255 / 15%)"),Q=(0,s.ff)("0 0 0 2px rgb(59 73 223)","0 0 0 2px rgb(129 140 248) ");return(0,I.jsxs)(a.xu,{className:"mde-preview",children:["write"===B&&(0,I.jsx)(a.xu,{borderRadius:"5px",_focusWithin:{boxShadow:_&&Q},boxShadow:G,overflow:"hidden",className:"discussion-box mde-preview",children:(0,I.jsx)(f.Z,{MDEValue:$,setMDEValue:W,isSubmitting:z,setUploadingImg:P})}),"preview"===B&&(0,I.jsx)(a.xu,{minH:"192px",borderRadius:"5px",padding:"10px !important",className:"mde-preview-content",boxShadow:G,fontSize:["1rem","1.1rem"],sx:{p:{marginBottom:"5px !important"}},children:(0,p.L)((0,d.Z)().makeHtml($))}),(0,I.jsxs)(a.Ug,{justify:"flex-end",w:"100%",mt:".5rem",children:[S&&(0,I.jsx)(l.ry,{onClick:k,disabled:F||z,children:"Dismiss"}),(0,I.jsx)(l.ry,{disabled:!X&&"write"===B||F||z,onClick:function(){H((function(e){return"write"===e?"preview":"write"}))},children:"write"===B?"Preview":"Edit"}),(0,I.jsx)(l.f6,{onClick:function(e){e.preventDefault(),L(!0);var t=v.EK.now(),c={value:$,replies:{},createdAt:t,userId:_.userId,commentId:(0,b.x0)(),likes:[]},u=[];u=E?C(J,$):y?J.map((function(e){return e.commentId===y||Object.values(e.replies).find((function(e){return e.commentId===y}))?(0,r.Z)((0,r.Z)({},e),{},{replies:(0,r.Z)((0,r.Z)({},e.replies),{},(0,i.Z)({},(0,b.x0)(),(0,r.Z)((0,r.Z)({},c),{},{repliedUserId:D,repliedCommentId:y})))}):e})):[].concat((0,o.Z)(J),[c]),(0,x.uA)(u,n).then((function(e){L(!1),W(""),k&&setTimeout(k,100),H("write"),(0,w.bZ)("commentItemToManage")})).catch((function(e){L(!1),console.log(e)}))},bg:"light.primary",disabled:!X||F||z,children:z?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(m.$,{size:"sm",mr:"1"})," Submitting"]}):"Submit"})]})]})}},48250:function(e,t,n){var i=n(89005);t.Z=function(){var e=new i.Converter({tables:!0,simplifiedAutoLink:!0,strikethrough:!0,tasklists:!0});return e}},89856:function(e,t,n){n.d(t,{L:function(){return r}});var i=n(26854),r=function(e){return i(e)}},18934:function(e,t,n){n.r(t);var i=n(1413),r=n(28227),o=n(28735),c=n(12481),u=n(72791),s=n(59434),a=n(16871),m=n(65294),d=n(80184);t.default=function(){(0,u.useEffect)((function(){return window.scrollTo(0,0)}),[]);var e=(0,a.s0)(),t=(0,s.v9)((function(e){return e.currentComments.commentItem})),n=(0,r.ff)("light.cardBg","dark.cardBg");if(!t)return(0,d.jsx)(a.Fg,{to:-1});var l=t.value;return(0,d.jsx)(o.Ug,{px:{md:".5rem"},flex:"1",w:"100%",justify:"center",children:(0,d.jsxs)(o.xu,{p:["1rem .5rem","1rem .5rem","2rem 2.5rem"],maxW:"900px",w:"100%",borderRadius:{md:"5px"},bg:n,className:"shadow",children:[(0,d.jsx)(o.X6,{fontSize:["1.3rem","1.7rem"],mb:"1.5rem",children:"Editing comment"}),(0,d.jsx)(m.Z,{postId:t.postId,commentId:t.commentId,valueToEdit:l,onDismiss:function(){e(-1)},showDismiss:!0,transformedComments:function(e,n){return e.map((function(e){return e.commentId===t.commentId?(0,i.Z)((0,i.Z)({},e),{},{value:n,edited:!0,editedAt:c.EK.now()}):e})).map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{replies:(0,i.Z)({},Object.values(e.replies).map((function(e){return e.commentId===t.commentId?(0,i.Z)((0,i.Z)({},e),{},{value:n,edited:!0,editedAt:c.EK.now()}):e})))})}))}})]})})}},49296:function(){}}]);
//# sourceMappingURL=891.30e13199.chunk.js.map